<!DOCTYPE html>
<html>
  <head>
    <title>NewChatGPT</title>
    <script src="jspsych/dist/jspsych.js"></script>
    <script src="jspsych/dist/plugin-html-keyboard-response.js"></script>
    <script src="jspsych/dist/plugin-fullscreen.js"></script>
    <script src="shuffled_stimuli.js"></script>
    <script src="jquery-3.6.4.min.js"></script>
    <link href="jspsych/dist/jspsych.css" rel="stylesheet" type="text/css" />
  </head>
<body></body>
  <script>

        /* create timeline */
        var timeline = [];

/* start the experiment */
var jsPsych = initJsPsych({
});

// Load JS file
$.getJSON('shuffled_stimuli.js', function(data) {
  // Get the data from the JS file
  const items = data.items;
  
  // Split the comma-separated string in one of the columns
  items.forEach(item => {
    item.stimuli = item.stimuli.split(',');
  });
  
  // Randomize the order of the items
  jsPsych.randomization.shuffle(items);
  
  // Use the randomized items in your experiment
  // ...
});

var names = []
for(x in shuffled_stimuli)
   names.push(shuffled_stimuli[x].stimuli);

myArray = names.map(str => str.split(","));

firstRow = myArray.pop();


// Define an array of words
const wordList = ['apple', 'banana', 'cherry', 'date', 'elderberry', 'fig', 'grape', 'honeydew', 'kiwi', 'lemon'];

// Select 4 random words from the array
const randomWords = [];
while (randomWords.length < 4) {
  const randomIndex = Math.floor(Math.random() * firstRow.length);
  const randomWord = firstRow[randomIndex];
  if (!randomWords.includes(randomWord)) {
    randomWords.push(randomWord);
  }
}


// Define a jsPsych trial to display the words
var wordDisplayTrial = {
  type: jsPsychHtmlKeyboardResponse,
  stimulus: function() {
    const quadrantSize = window.innerWidth / 4;
    const centerX = window.innerWidth / 3;
    const centerY = window.innerHeight / 3;
    const quadrants = [
      { x: 0, y: 0 },
      { x: quadrantSize, y: 0 },
      { x: 0, y: quadrantSize },
      { x: quadrantSize, y: quadrantSize },
    ];
    let html = '';
    for (let i = 0; i < 4; i++) {
      html += `<div class="word" style="position:absolute; top:${centerY + quadrants[i].y}px; left:${centerX + quadrants[i].x}px;">${randomWords[i]}</div>`;
    }
    return html;
  },
  choices: ['z', 'm'],
  trial_duration: 3000,
};

var fixation = {
  type: jsPsychHtmlKeyboardResponse,
  stimulus: '<div style="font-size:60px;">+</div>',
  choices: "NO_KEYS",
  trial_duration: 1000,
};
// Define a jsPsych timeline and add the word display trial
var test_procedure = {
  timeline: [fixation, wordDisplayTrial],
}
// timeline.push(wordDisplayTrial);
timeline.push(test_procedure);

jsPsych.run(timeline);


</script>
</html>

